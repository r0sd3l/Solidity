{"ast":null,"code":"import { stream } from '../../stream/Stream.js';\nimport { convertToNextProperty } from '../property/ConvertersProperty.js';\nimport { Property } from '../property/Property.generic.js';\nimport { UnbiasedProperty } from '../property/UnbiasedProperty.js';\nimport { readConfigureGlobal } from './configuration/GlobalParameters.js';\nimport { QualifiedParameters } from './configuration/QualifiedParameters.js';\nimport { toss } from './Tosser.js';\nimport { pathWalk } from './utils/PathWalker.js';\n\nfunction toProperty(generator, qParams) {\n  const prop = !Object.prototype.hasOwnProperty.call(generator, 'isAsync') ? new Property(generator, () => true) : convertToNextProperty(generator);\n  return qParams.unbiased === true ? new UnbiasedProperty(prop) : prop;\n}\n\nfunction streamSample(generator, params) {\n  const extendedParams = typeof params === 'number' ? Object.assign(Object.assign({}, readConfigureGlobal()), {\n    numRuns: params\n  }) : Object.assign(Object.assign({}, readConfigureGlobal()), params);\n  const qParams = QualifiedParameters.read(extendedParams);\n  const nextProperty = toProperty(generator, qParams);\n  const shrink = nextProperty.shrink.bind(nextProperty);\n  const tossedValues = stream(toss(nextProperty, qParams.seed, qParams.randomType, qParams.examples));\n\n  if (qParams.path.length === 0) {\n    return tossedValues.take(qParams.numRuns).map(s => s().value_);\n  }\n\n  return stream(pathWalk(qParams.path, tossedValues.map(s => s()), shrink)).take(qParams.numRuns).map(s => s.value_);\n}\n\nfunction sample(generator, params) {\n  return [...streamSample(generator, params)];\n}\n\nfunction statistics(generator, classify, params) {\n  const extendedParams = typeof params === 'number' ? Object.assign(Object.assign({}, readConfigureGlobal()), {\n    numRuns: params\n  }) : Object.assign(Object.assign({}, readConfigureGlobal()), params);\n  const qParams = QualifiedParameters.read(extendedParams);\n  const recorded = {};\n\n  for (const g of streamSample(generator, params)) {\n    const out = classify(g);\n    const categories = Array.isArray(out) ? out : [out];\n\n    for (const c of categories) {\n      recorded[c] = (recorded[c] || 0) + 1;\n    }\n  }\n\n  const data = Object.entries(recorded).sort((a, b) => b[1] - a[1]).map(i => [i[0], `${(i[1] * 100.0 / qParams.numRuns).toFixed(2)}%`]);\n  const longestName = data.map(i => i[0].length).reduce((p, c) => Math.max(p, c), 0);\n  const longestPercent = data.map(i => i[1].length).reduce((p, c) => Math.max(p, c), 0);\n\n  for (const item of data) {\n    qParams.logger(`${item[0].padEnd(longestName, '.')}..${item[1].padStart(longestPercent, '.')}`);\n  }\n}\n\nexport { sample, statistics };","map":{"version":3,"sources":["C:/Users/rodri/Solidity/solidity/faucet/node_modules/fast-check/lib/esm/check/runner/Sampler.js"],"names":["stream","convertToNextProperty","Property","UnbiasedProperty","readConfigureGlobal","QualifiedParameters","toss","pathWalk","toProperty","generator","qParams","prop","Object","prototype","hasOwnProperty","call","unbiased","streamSample","params","extendedParams","assign","numRuns","read","nextProperty","shrink","bind","tossedValues","seed","randomType","examples","path","length","take","map","s","value_","sample","statistics","classify","recorded","g","out","categories","Array","isArray","c","data","entries","sort","a","b","i","toFixed","longestName","reduce","p","Math","max","longestPercent","item","logger","padEnd","padStart"],"mappings":"AAAA,SAASA,MAAT,QAAuB,wBAAvB;AACA,SAASC,qBAAT,QAAsC,mCAAtC;AACA,SAASC,QAAT,QAAyB,iCAAzB;AACA,SAASC,gBAAT,QAAiC,iCAAjC;AACA,SAASC,mBAAT,QAAoC,qCAApC;AACA,SAASC,mBAAT,QAAoC,wCAApC;AACA,SAASC,IAAT,QAAqB,aAArB;AACA,SAASC,QAAT,QAAyB,uBAAzB;;AACA,SAASC,UAAT,CAAoBC,SAApB,EAA+BC,OAA/B,EAAwC;AACpC,QAAMC,IAAI,GAAG,CAACC,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCN,SAArC,EAAgD,SAAhD,CAAD,GACP,IAAIP,QAAJ,CAAaO,SAAb,EAAwB,MAAM,IAA9B,CADO,GAEPR,qBAAqB,CAACQ,SAAD,CAF3B;AAGA,SAAOC,OAAO,CAACM,QAAR,KAAqB,IAArB,GAA4B,IAAIb,gBAAJ,CAAqBQ,IAArB,CAA5B,GAAyDA,IAAhE;AACH;;AACD,SAASM,YAAT,CAAsBR,SAAtB,EAAiCS,MAAjC,EAAyC;AACrC,QAAMC,cAAc,GAAG,OAAOD,MAAP,KAAkB,QAAlB,GACjBN,MAAM,CAACQ,MAAP,CAAcR,MAAM,CAACQ,MAAP,CAAc,EAAd,EAAkBhB,mBAAmB,EAArC,CAAd,EAAwD;AAAEiB,IAAAA,OAAO,EAAEH;AAAX,GAAxD,CADiB,GAC8DN,MAAM,CAACQ,MAAP,CAAcR,MAAM,CAACQ,MAAP,CAAc,EAAd,EAAkBhB,mBAAmB,EAArC,CAAd,EAAwDc,MAAxD,CADrF;AAEA,QAAMR,OAAO,GAAGL,mBAAmB,CAACiB,IAApB,CAAyBH,cAAzB,CAAhB;AACA,QAAMI,YAAY,GAAGf,UAAU,CAACC,SAAD,EAAYC,OAAZ,CAA/B;AACA,QAAMc,MAAM,GAAGD,YAAY,CAACC,MAAb,CAAoBC,IAApB,CAAyBF,YAAzB,CAAf;AACA,QAAMG,YAAY,GAAG1B,MAAM,CAACM,IAAI,CAACiB,YAAD,EAAeb,OAAO,CAACiB,IAAvB,EAA6BjB,OAAO,CAACkB,UAArC,EAAiDlB,OAAO,CAACmB,QAAzD,CAAL,CAA3B;;AACA,MAAInB,OAAO,CAACoB,IAAR,CAAaC,MAAb,KAAwB,CAA5B,EAA+B;AAC3B,WAAOL,YAAY,CAACM,IAAb,CAAkBtB,OAAO,CAACW,OAA1B,EAAmCY,GAAnC,CAAwCC,CAAD,IAAOA,CAAC,GAAGC,MAAlD,CAAP;AACH;;AACD,SAAOnC,MAAM,CAACO,QAAQ,CAACG,OAAO,CAACoB,IAAT,EAAeJ,YAAY,CAACO,GAAb,CAAkBC,CAAD,IAAOA,CAAC,EAAzB,CAAf,EAA6CV,MAA7C,CAAT,CAAN,CACFQ,IADE,CACGtB,OAAO,CAACW,OADX,EAEFY,GAFE,CAEGC,CAAD,IAAOA,CAAC,CAACC,MAFX,CAAP;AAGH;;AACD,SAASC,MAAT,CAAgB3B,SAAhB,EAA2BS,MAA3B,EAAmC;AAC/B,SAAO,CAAC,GAAGD,YAAY,CAACR,SAAD,EAAYS,MAAZ,CAAhB,CAAP;AACH;;AACD,SAASmB,UAAT,CAAoB5B,SAApB,EAA+B6B,QAA/B,EAAyCpB,MAAzC,EAAiD;AAC7C,QAAMC,cAAc,GAAG,OAAOD,MAAP,KAAkB,QAAlB,GACjBN,MAAM,CAACQ,MAAP,CAAcR,MAAM,CAACQ,MAAP,CAAc,EAAd,EAAkBhB,mBAAmB,EAArC,CAAd,EAAwD;AAAEiB,IAAAA,OAAO,EAAEH;AAAX,GAAxD,CADiB,GAC8DN,MAAM,CAACQ,MAAP,CAAcR,MAAM,CAACQ,MAAP,CAAc,EAAd,EAAkBhB,mBAAmB,EAArC,CAAd,EAAwDc,MAAxD,CADrF;AAEA,QAAMR,OAAO,GAAGL,mBAAmB,CAACiB,IAApB,CAAyBH,cAAzB,CAAhB;AACA,QAAMoB,QAAQ,GAAG,EAAjB;;AACA,OAAK,MAAMC,CAAX,IAAgBvB,YAAY,CAACR,SAAD,EAAYS,MAAZ,CAA5B,EAAiD;AAC7C,UAAMuB,GAAG,GAAGH,QAAQ,CAACE,CAAD,CAApB;AACA,UAAME,UAAU,GAAGC,KAAK,CAACC,OAAN,CAAcH,GAAd,IAAqBA,GAArB,GAA2B,CAACA,GAAD,CAA9C;;AACA,SAAK,MAAMI,CAAX,IAAgBH,UAAhB,EAA4B;AACxBH,MAAAA,QAAQ,CAACM,CAAD,CAAR,GAAc,CAACN,QAAQ,CAACM,CAAD,CAAR,IAAe,CAAhB,IAAqB,CAAnC;AACH;AACJ;;AACD,QAAMC,IAAI,GAAGlC,MAAM,CAACmC,OAAP,CAAeR,QAAf,EACRS,IADQ,CACH,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,CAAC,CAAD,CAAD,GAAOD,CAAC,CAAC,CAAD,CADf,EAERhB,GAFQ,CAEHkB,CAAD,IAAO,CAACA,CAAC,CAAC,CAAD,CAAF,EAAQ,GAAE,CAAEA,CAAC,CAAC,CAAD,CAAD,GAAO,KAAR,GAAiBzC,OAAO,CAACW,OAA1B,EAAmC+B,OAAnC,CAA2C,CAA3C,CAA8C,GAAxD,CAFH,CAAb;AAGA,QAAMC,WAAW,GAAGP,IAAI,CAACb,GAAL,CAAUkB,CAAD,IAAOA,CAAC,CAAC,CAAD,CAAD,CAAKpB,MAArB,EAA6BuB,MAA7B,CAAoC,CAACC,CAAD,EAAIV,CAAJ,KAAUW,IAAI,CAACC,GAAL,CAASF,CAAT,EAAYV,CAAZ,CAA9C,EAA8D,CAA9D,CAApB;AACA,QAAMa,cAAc,GAAGZ,IAAI,CAACb,GAAL,CAAUkB,CAAD,IAAOA,CAAC,CAAC,CAAD,CAAD,CAAKpB,MAArB,EAA6BuB,MAA7B,CAAoC,CAACC,CAAD,EAAIV,CAAJ,KAAUW,IAAI,CAACC,GAAL,CAASF,CAAT,EAAYV,CAAZ,CAA9C,EAA8D,CAA9D,CAAvB;;AACA,OAAK,MAAMc,IAAX,IAAmBb,IAAnB,EAAyB;AACrBpC,IAAAA,OAAO,CAACkD,MAAR,CAAgB,GAAED,IAAI,CAAC,CAAD,CAAJ,CAAQE,MAAR,CAAeR,WAAf,EAA4B,GAA5B,CAAiC,KAAIM,IAAI,CAAC,CAAD,CAAJ,CAAQG,QAAR,CAAiBJ,cAAjB,EAAiC,GAAjC,CAAsC,EAA7F;AACH;AACJ;;AACD,SAAStB,MAAT,EAAiBC,UAAjB","sourcesContent":["import { stream } from '../../stream/Stream.js';\nimport { convertToNextProperty } from '../property/ConvertersProperty.js';\nimport { Property } from '../property/Property.generic.js';\nimport { UnbiasedProperty } from '../property/UnbiasedProperty.js';\nimport { readConfigureGlobal } from './configuration/GlobalParameters.js';\nimport { QualifiedParameters } from './configuration/QualifiedParameters.js';\nimport { toss } from './Tosser.js';\nimport { pathWalk } from './utils/PathWalker.js';\nfunction toProperty(generator, qParams) {\n    const prop = !Object.prototype.hasOwnProperty.call(generator, 'isAsync')\n        ? new Property(generator, () => true)\n        : convertToNextProperty(generator);\n    return qParams.unbiased === true ? new UnbiasedProperty(prop) : prop;\n}\nfunction streamSample(generator, params) {\n    const extendedParams = typeof params === 'number'\n        ? Object.assign(Object.assign({}, readConfigureGlobal()), { numRuns: params }) : Object.assign(Object.assign({}, readConfigureGlobal()), params);\n    const qParams = QualifiedParameters.read(extendedParams);\n    const nextProperty = toProperty(generator, qParams);\n    const shrink = nextProperty.shrink.bind(nextProperty);\n    const tossedValues = stream(toss(nextProperty, qParams.seed, qParams.randomType, qParams.examples));\n    if (qParams.path.length === 0) {\n        return tossedValues.take(qParams.numRuns).map((s) => s().value_);\n    }\n    return stream(pathWalk(qParams.path, tossedValues.map((s) => s()), shrink))\n        .take(qParams.numRuns)\n        .map((s) => s.value_);\n}\nfunction sample(generator, params) {\n    return [...streamSample(generator, params)];\n}\nfunction statistics(generator, classify, params) {\n    const extendedParams = typeof params === 'number'\n        ? Object.assign(Object.assign({}, readConfigureGlobal()), { numRuns: params }) : Object.assign(Object.assign({}, readConfigureGlobal()), params);\n    const qParams = QualifiedParameters.read(extendedParams);\n    const recorded = {};\n    for (const g of streamSample(generator, params)) {\n        const out = classify(g);\n        const categories = Array.isArray(out) ? out : [out];\n        for (const c of categories) {\n            recorded[c] = (recorded[c] || 0) + 1;\n        }\n    }\n    const data = Object.entries(recorded)\n        .sort((a, b) => b[1] - a[1])\n        .map((i) => [i[0], `${((i[1] * 100.0) / qParams.numRuns).toFixed(2)}%`]);\n    const longestName = data.map((i) => i[0].length).reduce((p, c) => Math.max(p, c), 0);\n    const longestPercent = data.map((i) => i[1].length).reduce((p, c) => Math.max(p, c), 0);\n    for (const item of data) {\n        qParams.logger(`${item[0].padEnd(longestName, '.')}..${item[1].padStart(longestPercent, '.')}`);\n    }\n}\nexport { sample, statistics };\n"]},"metadata":{},"sourceType":"module"}