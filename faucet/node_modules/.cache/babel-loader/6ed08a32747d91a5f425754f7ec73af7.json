{"ast":null,"code":"export class ReplayPath {\n  static parse(replayPathStr) {\n    const [serializedCount, serializedChanges] = replayPathStr.split(':');\n    const counts = this.parseCounts(serializedCount);\n    const changes = this.parseChanges(serializedChanges);\n    return this.parseOccurences(counts, changes);\n  }\n\n  static stringify(replayPath) {\n    const occurences = this.countOccurences(replayPath);\n    const serializedCount = this.stringifyCounts(occurences);\n    const serializedChanges = this.stringifyChanges(occurences);\n    return `${serializedCount}:${serializedChanges}`;\n  }\n\n  static intToB64(n) {\n    if (n < 26) return String.fromCharCode(n + 65);\n    if (n < 52) return String.fromCharCode(n + 97 - 26);\n    if (n < 62) return String.fromCharCode(n + 48 - 52);\n    return String.fromCharCode(n === 62 ? 43 : 47);\n  }\n\n  static b64ToInt(c) {\n    if (c >= 'a') return c.charCodeAt(0) - 97 + 26;\n    if (c >= 'A') return c.charCodeAt(0) - 65;\n    if (c >= '0') return c.charCodeAt(0) - 48 + 52;\n    return c === '+' ? 62 : 63;\n  }\n\n  static countOccurences(replayPath) {\n    return replayPath.reduce((counts, cur) => {\n      if (counts.length === 0 || counts[counts.length - 1].count === 64 || counts[counts.length - 1].value !== cur) counts.push({\n        value: cur,\n        count: 1\n      });else counts[counts.length - 1].count += 1;\n      return counts;\n    }, []);\n  }\n\n  static parseOccurences(counts, changes) {\n    const replayPath = [];\n\n    for (let idx = 0; idx !== counts.length; ++idx) {\n      const count = counts[idx];\n      const value = changes[idx];\n\n      for (let num = 0; num !== count; ++num) replayPath.push(value);\n    }\n\n    return replayPath;\n  }\n\n  static stringifyChanges(occurences) {\n    let serializedChanges = '';\n\n    for (let idx = 0; idx < occurences.length; idx += 6) {\n      const changesInt = occurences.slice(idx, idx + 6).reduceRight((prev, cur) => prev * 2 + (cur.value ? 1 : 0), 0);\n      serializedChanges += this.intToB64(changesInt);\n    }\n\n    return serializedChanges;\n  }\n\n  static parseChanges(serializedChanges) {\n    const changesInt = serializedChanges.split('').map(c => this.b64ToInt(c));\n    const changes = [];\n\n    for (let idx = 0; idx !== changesInt.length; ++idx) {\n      let current = changesInt[idx];\n\n      for (let n = 0; n !== 6; ++n, current >>= 1) {\n        changes.push(current % 2 === 1);\n      }\n    }\n\n    return changes;\n  }\n\n  static stringifyCounts(occurences) {\n    return occurences.map(_ref => {\n      let {\n        count\n      } = _ref;\n      return this.intToB64(count - 1);\n    }).join('');\n  }\n\n  static parseCounts(serializedCount) {\n    return serializedCount.split('').map(c => this.b64ToInt(c) + 1);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/rodri/Solidity/solidity/faucet/node_modules/fast-check/lib/esm/check/model/ReplayPath.js"],"names":["ReplayPath","parse","replayPathStr","serializedCount","serializedChanges","split","counts","parseCounts","changes","parseChanges","parseOccurences","stringify","replayPath","occurences","countOccurences","stringifyCounts","stringifyChanges","intToB64","n","String","fromCharCode","b64ToInt","c","charCodeAt","reduce","cur","length","count","value","push","idx","num","changesInt","slice","reduceRight","prev","map","current","join"],"mappings":"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","sourcesContent":["export class ReplayPath {\n    static parse(replayPathStr) {\n        const [serializedCount, serializedChanges] = replayPathStr.split(':');\n        const counts = this.parseCounts(serializedCount);\n        const changes = this.parseChanges(serializedChanges);\n        return this.parseOccurences(counts, changes);\n    }\n    static stringify(replayPath) {\n        const occurences = this.countOccurences(replayPath);\n        const serializedCount = this.stringifyCounts(occurences);\n        const serializedChanges = this.stringifyChanges(occurences);\n        return `${serializedCount}:${serializedChanges}`;\n    }\n    static intToB64(n) {\n        if (n < 26)\n            return String.fromCharCode(n + 65);\n        if (n < 52)\n            return String.fromCharCode(n + 97 - 26);\n        if (n < 62)\n            return String.fromCharCode(n + 48 - 52);\n        return String.fromCharCode(n === 62 ? 43 : 47);\n    }\n    static b64ToInt(c) {\n        if (c >= 'a')\n            return c.charCodeAt(0) - 97 + 26;\n        if (c >= 'A')\n            return c.charCodeAt(0) - 65;\n        if (c >= '0')\n            return c.charCodeAt(0) - 48 + 52;\n        return c === '+' ? 62 : 63;\n    }\n    static countOccurences(replayPath) {\n        return replayPath.reduce((counts, cur) => {\n            if (counts.length === 0 || counts[counts.length - 1].count === 64 || counts[counts.length - 1].value !== cur)\n                counts.push({ value: cur, count: 1 });\n            else\n                counts[counts.length - 1].count += 1;\n            return counts;\n        }, []);\n    }\n    static parseOccurences(counts, changes) {\n        const replayPath = [];\n        for (let idx = 0; idx !== counts.length; ++idx) {\n            const count = counts[idx];\n            const value = changes[idx];\n            for (let num = 0; num !== count; ++num)\n                replayPath.push(value);\n        }\n        return replayPath;\n    }\n    static stringifyChanges(occurences) {\n        let serializedChanges = '';\n        for (let idx = 0; idx < occurences.length; idx += 6) {\n            const changesInt = occurences\n                .slice(idx, idx + 6)\n                .reduceRight((prev, cur) => prev * 2 + (cur.value ? 1 : 0), 0);\n            serializedChanges += this.intToB64(changesInt);\n        }\n        return serializedChanges;\n    }\n    static parseChanges(serializedChanges) {\n        const changesInt = serializedChanges.split('').map((c) => this.b64ToInt(c));\n        const changes = [];\n        for (let idx = 0; idx !== changesInt.length; ++idx) {\n            let current = changesInt[idx];\n            for (let n = 0; n !== 6; ++n, current >>= 1) {\n                changes.push(current % 2 === 1);\n            }\n        }\n        return changes;\n    }\n    static stringifyCounts(occurences) {\n        return occurences.map(({ count }) => this.intToB64(count - 1)).join('');\n    }\n    static parseCounts(serializedCount) {\n        return serializedCount.split('').map((c) => this.b64ToInt(c) + 1);\n    }\n}\n"]},"metadata":{},"sourceType":"module"}